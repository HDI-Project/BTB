

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Overview &mdash; BTB 0.3.1.dev0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/dai-logo-white.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Overview" href="readme.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> BTB
          

          
            
            <img src="_static/dai-logo-white-200.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#install">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#install-using-pip">Install using Pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#install-from-source">Install from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#install-for-development">Install for Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="readme.html#quickstart">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#tuners">Tuners</a><ul>
<li class="toctree-l3"><a class="reference internal" href="readme.html#selectors">Selectors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#what-s-next">Whatâ€™s next?</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#citing-btb">Citing BTB</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/btb.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/btb.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/btb.benchmark.html">btb.benchmark package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/btb.benchmark.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/btb.benchmark.html#module-btb.benchmark">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/btb.selection.html">btb.selection package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/btb.selection.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/btb.selection.html#module-btb.selection">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/btb.tuning.html">btb.tuning package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/btb.tuning.html#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/btb.tuning.html#submodules">Submodules</a></li>
<li class="toctree-l4"><a class="reference internal" href="api/btb.tuning.html#module-btb.tuning">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/btb.html#module-btb">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#types-of-contributions">Types of Contributions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#report-bugs">Report Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#fix-bugs">Fix Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#implement-features">Implement Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#write-documentation">Write Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#submit-feedback">Submit Feedback</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#unit-testing-guidelines">Unit Testing Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#tips">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#release-workflow">Release Workflow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contributing.html#release-candidates">Release Candidates</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="history.html#id1">0.3.0 - 2019-11-11</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#new-project-structure">New project structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#new-api">New API</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#resolved-issues">Resolved Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id2">0.2.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#bug-fixes">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id3">0.2.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#internal-improvements">Internal Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#id4">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id5">0.2.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#id6">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id7">0.2.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#id8">Internal Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#id9">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id10">0.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#id11">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id12">0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="history.html#id13">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#id14">Internal Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="history.html#id15">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id16">0.1.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id17">0.1.1</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">BTB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/HDI-Project/BTB/blob/master/docs/index.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p align="left">
<img width="15%" src="https://dai.lids.mit.edu/wp-content/uploads/2018/06/Logo_DAI_highres.png" alt="BTB" />
<i>An open source project from Data to AI Lab at MIT.</i>
</p><a class="reference external image-reference" href="https://raw.githubusercontent.com/HDI-Project/BTB/master/docs/images/BTB-Icon-small.png"><img alt="" src="https://raw.githubusercontent.com/HDI-Project/BTB/master/docs/images/BTB-Icon-small.png" /></a>
<p>A simple, extensible backend for developing auto-tuning systems.</p>
<a class="reference external image-reference" href="https://pypi.python.org/pypi/baytune"><img alt="PyPi Shield" src="https://img.shields.io/pypi/v/baytune.svg" /></a>
<a class="reference external image-reference" href="https://travis-ci.org/HDI-Project/BTB"><img alt="Travis CI Shield" src="https://travis-ci.org/HDI-Project/BTB.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://codecov.io/gh/HDI-Project/BTB"><img alt="Coverage Status" src="https://codecov.io/gh/HDI-Project/BTB/branch/master/graph/badge.svg" /></a>
<a class="reference external image-reference" href="https://pepy.tech/project/baytune"><img alt="Downloads" src="https://pepy.tech/badge/baytune" /></a>
<ul class="simple">
<li><p>Free software: MIT license</p></li>
<li><p>Documentation: <a class="reference external" href="https://HDI-Project.github.io/BTB">https://HDI-Project.github.io/BTB</a></p></li>
<li><p>Homepage: <a class="reference external" href="https://github.com/HDI-Project/BTB">https://github.com/HDI-Project/BTB</a></p></li>
</ul>
<div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">Â¶</a></h1>
<p>Bayesian Tuning and Bandits is a simple, extensible backend for developing auto-tuning systems such as AutoML systems. It is currently being used in <a class="reference external" href="https://github.com/HDI-Project/ATM">ATM</a> (an AutoML system that allows tuning of classifiers) and MITâ€™s system for the DARPA <a class="reference external" href="https://www.darpa.mil/program/data-driven-discovery-of-models">Data driven discovery of models program</a>.</p>
<p><strong>BTB</strong> is under active development. If you come across any issues, please report them <a class="reference external" href="https://github.com/HDI-Project/BTB/issues/new">here</a>.</p>
</div>
<div class="section" id="install">
<h1>Install<a class="headerlink" href="#install" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">Â¶</a></h2>
<p><strong>BTB</strong> has been developed and tested on <a class="reference external" href="https://www.python.org/downloads">Python 3.5, 3.6 and 3.7</a></p>
<p>Also, although it is not strictly required, the usage of a
<a class="reference external" href="https://virtualenv.pypa.io/en/latest/">virtualenv</a> is highly recommended in order to avoid
interfering with other software installed in the system where <strong>BTB</strong> is run.</p>
<p>These are the minimum commands needed to create a virtualenv using python3.6 for <strong>BTB</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install virtualenv
virtualenv -p <span class="k">$(</span>which python3.6<span class="k">)</span> btb-venv
</pre></div>
</div>
<p>Afterwards, you have to execute this command to have the virtualenv activated:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> btb-venv/bin/activate
</pre></div>
</div>
<p>Remember about executing it every time you start a new console to work on <strong>BTB</strong>!</p>
</div>
<div class="section" id="install-using-pip">
<h2>Install using Pip<a class="headerlink" href="#install-using-pip" title="Permalink to this headline">Â¶</a></h2>
<p>After creating the virtualenv and activating it, we recommend using
<a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> in order to install <strong>BTB</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install btb
</pre></div>
</div>
<p>This will pull and install the latest stable release from <a class="reference external" href="https://pypi.org/">PyPi</a>.</p>
</div>
<div class="section" id="install-from-source">
<h2>Install from Source<a class="headerlink" href="#install-from-source" title="Permalink to this headline">Â¶</a></h2>
<p>With your virtualenv activated, you can clone the repository and install it from
source by running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code> on the <code class="docutils literal notranslate"><span class="pre">stable</span></code> branch:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:HDI-Project/BTB.git
<span class="nb">cd</span> BTB
git checkout stable
make install
</pre></div>
</div>
</div>
<div class="section" id="install-for-development">
<h2>Install for Development<a class="headerlink" href="#install-for-development" title="Permalink to this headline">Â¶</a></h2>
<p>If you want to contribute to the project, a few more steps are required to make the project ready
for development.</p>
<p>Please head to the <a class="reference external" href="https://HDI-Project.github.io/BTB/contributing.html#get-started">Contributing Guide</a>
for more details about this process.</p>
</div>
</div>
<div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">Â¶</a></h1>
<div class="section" id="tuners">
<h2>Tuners<a class="headerlink" href="#tuners" title="Permalink to this headline">Â¶</a></h2>
<p>Tuners are specifically designed to speed up the process of selecting the
optimal hyper parameter values for a specific machine learning algorithm.</p>
<p><code class="docutils literal notranslate"><span class="pre">btb.tuning.tuners</span></code> defines Tuners: classes with a fit/predict/propose interface for
suggesting sets of hyperparameters.</p>
<p>This is done by following a Bayesian Optimization approach and iteratively:</p>
<ul class="simple">
<li><p>letting the tuner propose new sets of hyper parameter</p></li>
<li><p>fitting and scoring the model with the proposed hyper parameters</p></li>
<li><p>passing the score obtained back to the tuner</p></li>
</ul>
<p>At each iteration the tuner will use the information already obtained to propose
the set of hyper parameters that it considers that have the highest probability
to obtain the best results.</p>
<p>To instantiate a <code class="docutils literal notranslate"><span class="pre">Tuner</span></code> all we need is a <code class="docutils literal notranslate"><span class="pre">Tunable</span></code> class with a collection of
<code class="docutils literal notranslate"><span class="pre">hyperparameters</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btb.tuning</span> <span class="kn">import</span> <span class="n">Tunable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btb.tuning.tuners</span> <span class="kn">import</span> <span class="n">GPTuner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btb.tuning.hyperparams</span> <span class="kn">import</span> <span class="n">IntHyperParam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hyperparams</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span> <span class="n">IntHyperParam</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">500</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span> <span class="n">IntHyperParam</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">500</span><span class="p">),</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tunable</span> <span class="o">=</span> <span class="n">Tunable</span><span class="p">(</span><span class="n">hyperparams</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tuner</span> <span class="o">=</span> <span class="n">GPTuner</span><span class="p">(</span><span class="n">tunable</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we perform the following three steps in a loop.</p>
<ol class="arabic">
<li><p>Let the Tuner propose a new set of parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="n">tuner</span><span class="o">.</span><span class="n">propose</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span>
<span class="go">{&#39;n_estimators&#39;: 297, &#39;max_depth&#39;: 3}</span>
</pre></div>
</div>
</li>
<li><p>Fit and score a new model using these parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="o">**</span><span class="n">parameters</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="go">RandomForestClassifier(bootstrap=True, class_weight=None, criterion=&#39;gini&#39;,</span>
<span class="go">            max_depth=3, max_features=&#39;auto&#39;, max_leaf_nodes=None,</span>
<span class="go">            min_impurity_decrease=0.0, min_impurity_split=None,</span>
<span class="go">            min_samples_leaf=1, min_samples_split=2,</span>
<span class="go">            min_weight_fraction_leaf=0.0, n_estimators=297, n_jobs=1,</span>
<span class="go">            oob_score=False, random_state=None, verbose=0,</span>
<span class="go">            warm_start=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span>
<span class="go">0.77</span>
</pre></div>
</div>
</li>
<li><p>Pass the used parameters and the score obtained back to the tuner:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tuner</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p>At each iteration, the <code class="docutils literal notranslate"><span class="pre">Tuner</span></code> will use the information about the previous tests
to evaluate and propose the set of parameter values that have the highest probability
of obtaining the highest score.</p>
<div class="section" id="selectors">
<h3>Selectors<a class="headerlink" href="#selectors" title="Permalink to this headline">Â¶</a></h3>
<p>The selectors are intended to be used in combination with tuners in order to find
out and decide which model seems to get the best results once it is properly fine tuned.</p>
<p>In order to use the selector we will create a <code class="docutils literal notranslate"><span class="pre">Tuner</span></code> instance for each model that
we want to try out, as well as the <code class="docutils literal notranslate"><span class="pre">Selector</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sklearn.svm</span> <span class="kn">import</span> <span class="n">SVC</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btb.selection</span> <span class="kn">import</span> <span class="n">UCB1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">btb.tuning.hyperparams</span> <span class="kn">import</span> <span class="n">FloatHyperParam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">models</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;RF&#39;</span><span class="p">:</span> <span class="n">RandomForestClassifier</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;SVC&#39;</span><span class="p">:</span> <span class="n">SVC</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">selector</span> <span class="o">=</span> <span class="n">UCB1</span><span class="p">([</span><span class="s1">&#39;RF&#39;</span><span class="p">,</span> <span class="s1">&#39;SVC&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf_hyperparams</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;n_estimators&#39;</span><span class="p">:</span> <span class="n">IntHyperParam</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">500</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span> <span class="n">IntHyperParam</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf_tunable</span> <span class="o">=</span> <span class="n">Tunable</span><span class="p">(</span><span class="n">rf_hyperparams</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svc_hyperparams</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="n">FloatHyperParam</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mf">10.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;gamma&#39;</span><span class="p">:</span> <span class="n">FloatHyperParam</span><span class="p">(</span><span class="mf">0.000000001</span><span class="p">,</span> <span class="mf">0.0000001</span><span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svc_tunable</span> <span class="o">=</span> <span class="n">Tunable</span><span class="p">(</span><span class="n">svc_hyperparams</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tuners</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;RF&#39;</span><span class="p">:</span> <span class="n">GPTuner</span><span class="p">(</span><span class="n">rf_tunable</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;SVC&#39;</span><span class="p">:</span> <span class="n">GPTuner</span><span class="p">(</span><span class="n">svc_tunable</span><span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
<p>Then we perform the following steps in a loop.</p>
<ol class="arabic">
<li><p>Pass all the obtained scores to the selector and let it decide which model to test.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">next_choice</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;RF&#39;</span><span class="p">:</span> <span class="n">tuners</span><span class="p">[</span><span class="s1">&#39;RF&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">scores</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;SVC&#39;</span><span class="p">:</span> <span class="n">tuners</span><span class="p">[</span><span class="s1">&#39;SVC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">scores</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">next_choice</span>
<span class="go">&#39;RF&#39;</span>
</pre></div>
</div>
</li>
<li><p>Obtain a new set of parameters from the indicated tuner and create a model instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span> <span class="o">=</span> <span class="n">tuners</span><span class="p">[</span><span class="n">next_choice</span><span class="p">]</span><span class="o">.</span><span class="n">propose</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span>
<span class="go">{&#39;n_estimators&#39;: 289, &#39;max_depth&#39;: 18}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">models</span><span class="p">[</span><span class="n">next_choice</span><span class="p">](</span><span class="o">**</span><span class="n">parameters</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Evaluate the score of the new model instance and pass it back to the tuner</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="go">RandomForestClassifier(bootstrap=True, class_weight=None, criterion=&#39;gini&#39;,</span>
<span class="go">            max_depth=18, max_features=&#39;auto&#39;, max_leaf_nodes=None,</span>
<span class="go">            min_impurity_decrease=0.0, min_impurity_split=None,</span>
<span class="go">            min_samples_leaf=1, min_samples_split=2,</span>
<span class="go">            min_weight_fraction_leaf=0.0, n_estimators=289, n_jobs=1,</span>
<span class="go">            oob_score=False, random_state=None, verbose=0,</span>
<span class="go">            warm_start=False)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span>
<span class="go">0.89</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tuners</span><span class="p">[</span><span class="n">next_choice</span><span class="p">]</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="what-s-next">
<h2>Whatâ€™s next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">Â¶</a></h2>
<p>For more details about <strong>BTB</strong> and all its possibilities and features, please check the
<a class="reference external" href="https://HDI-Project.github.io/BTB/">project documentation site</a>!</p>
</div>
<div class="section" id="citing-btb">
<h2>Citing BTB<a class="headerlink" href="#citing-btb" title="Permalink to this headline">Â¶</a></h2>
<p>If you use BTB, please consider citing the following work:</p>
<ul class="simple">
<li><p>Laura Gustafson. Bayesian Tuning and Bandits: An Extensible, Open Source Library for AutoML. Masters thesis, MIT EECS, June 2018. <a class="reference external" href="https://dai.lids.mit.edu/wp-content/uploads/2018/05/Laura_MEng_Final.pdf">(pdf)</a></p></li>
</ul>
<div class="highlight-bibtex notranslate"><div class="highlight"><pre><span></span><span class="nc">@MastersThesis</span><span class="p">{</span><span class="nl">Laura:2018</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">&quot;Bayesian Tuning and Bandits: An Extensible, Open Source Library for AutoML&quot;</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">&quot;Laura Gustafson&quot;</span><span class="p">,</span>
  <span class="na">month</span> <span class="p">=</span> <span class="s">&quot;May&quot;</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">&quot;2018&quot;</span><span class="p">,</span>
  <span class="na">url</span> <span class="p">=</span> <span class="s">&quot;https://dai.lids.mit.edu/wp-content/uploads/2018/05/Laura_MEng_Final.pdf&quot;</span><span class="p">,</span>
  <span class="na">type</span> <span class="p">=</span> <span class="s">&quot;M. Eng Thesis&quot;</span><span class="p">,</span>
  <span class="na">address</span> <span class="p">=</span> <span class="s">&quot;Cambridge, MA&quot;</span><span class="p">,</span>
  <span class="na">school</span> <span class="p">=</span> <span class="s">&quot;Massachusetts Institute of Technology&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">Â¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="readme.html" class="btn btn-neutral float-right" title="Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, MIT Data To AI Lab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>